{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://oaxe.xyz/schemas/product_spec.schema.json",
  "title": "Product Specification",
  "description": "Complete product specification generated by Oaxe",
  "type": "object",
  "required": [
    "id",
    "name",
    "tagline",
    "category",
    "targetAudience",
    "features",
    "personas",
    "journeys",
    "successMetrics",
    "brandDNA",
    "designSystem",
    "architecture",
    "evolution"
  ],
  "properties": {
    "id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this product specification"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version of this specification"
    },
    "generatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when this spec was generated"
    },
    "directive": {
      "type": "string",
      "description": "Original user directive that generated this spec"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 50,
      "description": "Product name"
    },
    "tagline": {
      "type": "string",
      "minLength": 10,
      "maxLength": 100,
      "description": "One-line product description"
    },
    "category": {
      "type": "string",
      "description": "Product category (e.g., 'Developer Tools', 'SaaS', 'Social')"
    },
    "targetAudience": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "description": "Primary target audience segments"
    },
    "features": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/feature"
      },
      "minItems": 5,
      "description": "Product features"
    },
    "personas": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/persona"
      },
      "minItems": 2,
      "description": "User personas"
    },
    "journeys": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/journey"
      },
      "minItems": 1,
      "description": "User journeys"
    },
    "successMetrics": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/metric"
      },
      "minItems": 3,
      "description": "Success metrics"
    },
    "competitivePosition": {
      "$ref": "#/$defs/competitivePosition",
      "description": "Competitive analysis and positioning"
    },
    "brandDNA": {
      "$ref": "#/$defs/brandDNA",
      "description": "Brand identity specification"
    },
    "designSystem": {
      "$ref": "#/$defs/designSystem",
      "description": "Design system specification"
    },
    "architecture": {
      "$ref": "#/$defs/architecture",
      "description": "System architecture specification"
    },
    "uiFlows": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/uiFlow"
      },
      "description": "UI flow specifications"
    },
    "launchAssets": {
      "$ref": "#/$defs/launchAssets",
      "description": "Launch and viral assets"
    },
    "evolution": {
      "$ref": "#/$defs/evolution",
      "description": "Product evolution roadmap"
    },
    "constraints": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Product constraints"
    },
    "assumptions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Assumptions made during specification"
    }
  },
  "$defs": {
    "feature": {
      "type": "object",
      "required": ["id", "name", "description", "priority", "version"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "priority": {
          "type": "string",
          "enum": ["P0", "P1", "P2"]
        },
        "version": {
          "type": "string",
          "enum": ["v1", "v2", "v3"]
        },
        "userStory": {
          "type": "string"
        },
        "acceptanceCriteria": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "persona": {
      "type": "object",
      "required": ["id", "name", "description", "goals", "painPoints"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "goals": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "painPoints": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "technicalSophistication": {
          "type": "string",
          "enum": ["low", "medium", "high"]
        }
      }
    },
    "journey": {
      "type": "object",
      "required": ["id", "name", "persona", "steps"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "persona": {
          "type": "string"
        },
        "trigger": {
          "type": "string"
        },
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "action": {
                "type": "string"
              },
              "screen": {
                "type": "string"
              },
              "emotion": {
                "type": "string"
              }
            }
          }
        },
        "outcome": {
          "type": "string"
        }
      }
    },
    "metric": {
      "type": "object",
      "required": ["id", "name", "type", "target"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["leading", "lagging"]
        },
        "target": {
          "type": "string"
        },
        "measurement": {
          "type": "string"
        }
      }
    },
    "competitivePosition": {
      "type": "object",
      "properties": {
        "competitors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "strengths": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "weaknesses": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "differentiation": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "positionStatement": {
          "type": "string"
        }
      }
    },
    "brandDNA": {
      "type": "object",
      "required": ["archetype", "brandPromise", "emotionalSignature", "visualSignature", "verbalTone"],
      "properties": {
        "archetype": {
          "type": "object",
          "properties": {
            "primary": {
              "type": "string"
            },
            "secondary": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          }
        },
        "brandPromise": {
          "type": "object",
          "properties": {
            "statement": {
              "type": "string"
            },
            "proofPoints": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "emotionalSignature": {
          "type": "object",
          "properties": {
            "primary": {
              "type": "string"
            },
            "secondary": {
              "type": "string"
            },
            "avoided": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "visualSignature": {
          "type": "object"
        },
        "verbalTone": {
          "type": "object"
        },
        "guardrails": {
          "type": "object"
        }
      }
    },
    "designSystem": {
      "type": "object",
      "properties": {
        "typography": {
          "type": "object"
        },
        "color": {
          "type": "object"
        },
        "spacing": {
          "type": "object"
        },
        "motion": {
          "type": "object"
        },
        "components": {
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      }
    },
    "architecture": {
      "type": "object",
      "properties": {
        "systemDiagram": {
          "type": "string"
        },
        "components": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "dataModel": {
          "type": "object"
        },
        "apiContract": {
          "type": "object"
        },
        "infrastructure": {
          "type": "object"
        }
      }
    },
    "uiFlow": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "screens": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "states": {
          "type": "object"
        }
      }
    },
    "launchAssets": {
      "type": "object",
      "properties": {
        "tweets": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "content": {
                "type": "string",
                "maxLength": 280
              },
              "type": {
                "type": "string",
                "enum": ["launch", "pinned", "followup"]
              }
            }
          }
        },
        "heroCopy": {
          "type": "object",
          "properties": {
            "headline": {
              "type": "string"
            },
            "subhead": {
              "type": "string"
            },
            "cta": {
              "type": "string"
            }
          }
        },
        "screenshotSpec": {
          "type": "object"
        },
        "productHuntTagline": {
          "type": "string",
          "maxLength": 60
        }
      }
    },
    "evolution": {
      "type": "object",
      "required": ["v1", "v2", "v3"],
      "properties": {
        "v1": {
          "type": "object",
          "properties": {
            "theme": {
              "type": "string"
            },
            "features": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "shortcuts": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "v2": {
          "type": "object",
          "properties": {
            "theme": {
              "type": "string"
            },
            "features": {
              "type": "object"
            },
            "moatStrategy": {
              "type": "string"
            },
            "monetization": {
              "type": "object"
            }
          }
        },
        "v3": {
          "type": "object",
          "properties": {
            "theme": {
              "type": "string"
            },
            "platformFeatures": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "enterpriseFeatures": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "compliance": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}
